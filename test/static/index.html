<!DOCTYPE html>
<head>
    <title>Compiler</title>
    <script src="/dist/lib/components/index.js"></script>
    <script src="/dist/lib/typescript/index.js"></script>
    <script src="/dist/index.js"></script>    
</head>
<html>
    <body>
        <pre id="result"></pre>
        <pre id="script"></pre>
        <script>
            let script = `
import {Module} from '@ijstech/components';
export default class Hello extends Module{
    buttonClick(){
        alert('hello')
    };
    render(){
        return <i-panel>
            <i-button width={80} height={25} caption="Hello World" onClick={this.buttonClick}></i-button>
        </i-panel>
    }
}
            `
            async function test(){
                let content = await fetch('/dist/lib/components/index.d.ts');
                let dts = await content.text();                
                let Compiler = require('@ijstech/compiler').Compiler;
                let compiler = new Compiler();
                compiler.addPackage('@ijstech/components', {
                    dts: {
                        'index.d.ts': dts
                    },
                    version: ''
                });
                compiler.addContent('index.tsx', script);
                let result = await compiler.compile();
                application.loadModule('', {
                    script: result.script['index.js']
                });
            };
            test();            
        </script>
    </body>
</html>